<div class="row">
    <div class="col-md-11" style="margin-left: 20px">
      <br><br>
      <h3 style="margin-top: 20px">Liste des utilisateurs </h3>
      <hr>
      <br><br>
<table class="table align-items-center table-flush">
    <thead class="thead-light">
      <tr>
        <th scope="col">User Name</th>
        <th scope="col">Adresse Email </th>
        <th scope="col">Password</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor='let u of users'>
        <td>{{u.username}}</td>
        <td>{{u.email}}</td>
        <td>{{u.password}}</td>
        <td>
            <button type="button" class="btn btn-outline-danger"
                    (click)="deleteUser(u.idUser)">Supprimer
            </button>
          </td>
      </tr>
    </tbody>
  </table>


  <div *ngIf="users && users.length > 0">
    <h2>Liste des utilisateurs avec leurs rôles :</h2>
    <ul *ngFor="let user of users">
      <li>{{ user.username }} - Roles: 
        <ul>
          <li *ngFor="let role of user.roles">
            {{ role.name }}
          </li>
        </ul>
      </li>
    </ul>
  </div>


  

  <div *ngIf="users">
    <h2>Liste des utilisateurs avec leurs rôles :</h2>
    <ul>
      <li *ngFor="let user of users">
        {{ user.username }} - {{ user.roles }} <!-- Assurez-vous que 'roles' contient les noms des rôles -->
      </li>
    </ul>
  </div>
  
  <div>
    <label for="selectedUserId">Sélectionnez un utilisateur :</label>
    <select id="selectedUserId" [(ngModel)]="selectedUserId" name="selectedUserId">
      <option *ngFor="let user of users" [value]="user.idUser">{{ user.username }}</option>
    </select>
  </div>
  
  <div>
    <label for="selectedRoleId">Sélectionnez un rôle :</label>
    <select id="selectedRoleId" [(ngModel)]="selectedRoleId" name="selectedRoleId">
      <option *ngFor="let role of user.roles" [value]="roles">{{ role.name  }}</option> <!-- Utilisez la liste des rôles ici -->
    </select>
  </div>
  
  <button (click)="updateUserRole()">Modifier le rôle de l'utilisateur</button>
  



</div>
</div>

<!--
  <div *ngIf="users && users.length > 0">
  <h2>Liste des utilisateurs avec leurs rôles :</h2>
  <ul *ngFor="let user of users">
    <li>{{ user.username }} - Roles: 
      <ul>
        <li *ngFor="let role of user.roles">
          {{ role.name }}
        </li>
      </ul>
    </li>
  </ul>
</div>

<div *ngIf="!users || users.length === 0">
    <p>Aucun utilisateur n'a été trouvé.</p>
  </div>

  <div>
    <label for="userId">ID de l'utilisateur :</label>
    <input type="text" id="userId" [(ngModel)]="userId" name="userId">
  </div>
  
  <div>
    <label for="roleId">ID du nouveau rôle :</label>
    <input type="text" id="roleId" [(ngModel)]="roleId" name="roleId">
  </div>
  
  <button (click)="updateUserRole()">Mettre à jour le rôle de l'utilisateur</button>





<div *ngIf="users">
    <h2>Liste des utilisateurs avec leurs rôles :</h2>
    <ul>
      <li *ngFor="let user of users">
        {{ user.username }} - {{ user.roles[0].name }} 
      </li>
    </ul>
  </div>
  
  <div>
    <label for="selectedUserId">Sélectionnez un utilisateur :</label>
    <select id="selectedUserId" [(ngModel)]="selectedUserId" name="selectedUserId">
      <option *ngFor="let user of users" [value]="user.idUser">{{ user.username }}</option>
    </select>
  </div>
  
  <div>
    <label for="selectedRoleId">Sélectionnez un rôle :</label>
    <select id="selectedRoleId" [(ngModel)]="selectedRoleId" name="selectedRoleId">
      <option *ngFor="let role of user.roles" [value]="role.idRole">{{ role.name }}</option>
    </select>
  </div>
  
  <button (click)="updateUserRole()">Modifier le rôle de l'utilisateur</button>

-->